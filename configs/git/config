[add "interactive"]
	useBuiltin = true

[advice]
	detachedHead = false

[alias]
	s = status
	sl = log -10 --color=always --pretty='format:%C(auto)%h %<(60,trunc)%s %>|(-35)%d%>|(-20)%aN%>|(-1)%ah' --abbrev-commit
	sll = log --pretty=short --abbrev-commit
	d = diff --staged
	rs = restore --staged
	ap = add -pu
	lin = linear
	bigclone = clone --filter=tree:0
	amend = commit --amend --no-edit
	fix = commit --fixup
	p = push -fu origin @
	git = !git
	pukk = pull
	r = restore
	rsw = restore --staged --worktree
	tlog = log --graph --oneline --all
	leash = push --force-with-lease
	fulllog = log --format=fuller --full-diff --patch

[commit]
	# show both diff between index and HEAD and diff between worktree and index
	# in COMMIT_EDITMSG
	verbose = 2

	# tolerate lines starting with # in the message
	cleanup = scissors

[blame]
	coloring = highlightRecent

[core]
	pager = delta

[interactive]
	diffFilter = delta --color-only

[delta]
	features = line-numbers decorations

[user]
	name = Jade Lovelace
	email = software@lfcode.ca

[pull]
	ff = only

[push]
	default = current

[merge]
	conflictStyle = diff3

[diff]
	colorMoved = dimmed-zebra

[init]
	defaultBranch = main

[rerere]
	enabled = true

[cola]
	spellcheck = false

[rebase]
	# rebase --autosquash by default
	autoSquash = true
	# Warns on losing commits in rebase -i
	missingCommitsCheck = warn

# git clone -j8 by default
[submodule]
	fetchJobs = 8

# allow gerrit git hooks to run on git-revise
[revise "run-hooks"]
	commit-msg = true

[merge "mergiraf"]
    name = mergiraf
    driver = mergiraf merge --git %O %A %B -s %S -x %X -y %Y -p %P -l %L

# [url "git@github.com:"]
# 	pushInsteadOf = git://github.com/
# 	pushInsteadOf = https://github.com/

# Use lix specific git configs in lix repos
[includeIf "gitdir:~/lix/"]
    path = ~/lix/.gitconfig

[sendemail.linux]
	tocmd ="`pwd`/scripts/get_maintainer.pl --nogit --nogit-fallback --norolestats --nol"
	cccmd ="`pwd`/scripts/get_maintainer.pl --nogit --nogit-fallback --norolestats --nom"

# https://github.com/dandavison/delta/discussions/1676
# [diff "json-diff"]
# 	command = json-diff --color "$2" "$5" || true
[filter "lfs"]
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true
	clean = git-lfs clean -- %f
