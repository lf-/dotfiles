"$schema" = "https://jj-vcs.github.io/jj/latest/config-schema.json"

[snapshot]
# auto-track things EXCEPT in repo root where I keep putting junk files
auto-track = "glob:*/**/*"

[gerrit]
enabled = false

[templates]
commit_trailers = '''
if(
  config("gerrit.enabled").as_boolean() && !trailers.contains_key("Change-Id"),
  format_gerrit_change_id_trailer(self)
)
'''
draft_commit_description = '''
concat(
  coalesce(description, default_commit_description, "\n"),
  surround(
    "\nJJ: This commit contains the following changes:\n", "",
    indent("JJ:     ", diff.stat(72)),
  ),
  "\nJJ: ignore-rest\n",
  diff.git(),
)
'''
git_push_bookmark = '"jade/push-" ++ change_id.short()'

[git]
private-commits = "description(glob:'wip:*') | description(glob:'private:*')"

[ui]
pager = "delta"
diff-formatter = ":git"

default-command = "log"

[aliases]
# jj jj jj commit
jj = []

[user]
name = "Jade Lovelace"
email = "software@lfcode.ca"

[fix.tools.rustfmt]
command = ["rustfmt", "+nightly", "--emit", "stdout"]
patterns = ["glob:'**/*.rs'"]
enabled = false

[[--scope]]
--when.repositories = ["~/lix"]
[--scope.user]
email = "lix@jade.fyi"
